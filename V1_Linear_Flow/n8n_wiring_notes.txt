n8n Integration Blueprint for Full Deployment

1. IMAP Email Node
   - Monitor: INBOX
   - Download only `.pdf` attachments
   - Run workflow on new email with valid PDF

2. Extract From File (PDF)
   - Convert PDF to text blocks

3. Function Node: Supervisor Agent
   - Validate input is PDF
   - Check email metadata
   - Forward to LLM via OpenAI/Gemini node

4. HTTP Request or LLM Node: Metadata Extraction
   - Prompt with layout + OCR data

5. Function Node: Validate Required Fields
   - Check for required JSON fields
   - Route to Verifier Agent if complete

6. HTTP Request or LLM Node: Verifier Agent
   - Use verifier_agent_prompt.txt
   - Confirm schema, semantic integrity

7. IF Node: Verification Passed
   - True: Send success email with JSON attachment
   - False: Send error message with reason

8. Email Node (SMTP or SendGrid)
   - Return metadata or error template to sender

9. Error Trigger Node (Global)
   - Log workflow exceptions or send fallback alert

Ensure:
- Output matches prompt field ordering
- JSON schema is validated with a test script
- Fallback logic is clean and user-friendly