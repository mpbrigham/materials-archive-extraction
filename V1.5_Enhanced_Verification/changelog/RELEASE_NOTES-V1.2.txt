# IMIS V1.2 Release Notes

## Enhanced Verification System

This release introduces significant improvements to the verification system in the V1 Linear Flow:

### New Features

1. **Two-stage Verification**
   - Added JSON Schema Validation for efficient structure checking
   - Added Visual Verification against source PDF documents
   - Enhanced evidence collection for verification auditing

2. **Intelligent Retry Logic**
   - Implemented extraction retry system with error context
   - Added specialized retry prompts with previous error guidance
   - Configured maximum retry attempts with degradation path

3. **Improved Confidence System**
   - Added visual verification confidence adjustments
   - Enhanced evidence collection for verification decisions
   - Better documentation of confidence thresholds

### Technical Changes

1. **New Components**
   - Added `schema_validator.js` for JSON validation
   - Added `metadata_extraction_retry.txt` prompt
   - Added `verifier_visual.txt` prompt for visual verification
   - Enhanced `verifierAgent` to `visualVerifierAgent`

2. **Updated Interface Contracts**
   - Expanded AGENT_INTERFACE_CONTRACTS.txt with new data flows
   - Added schema validation results to state transitions
   - Added visual verification evidence to outputs

3. **State Engine Enhancement**
   - Added new states: VALIDATION_FAILED, RETRY_EXTRACTION
   - Enhanced state transition documentation
   - Added state ownership specifications

### Migration Notes

- The enhanced system is backward compatible with existing data
- Existing workflows will need to be updated to include the Schema Validator
- Visual verification requires multimodal LLM capabilities (Gemini Pro Vision, Claude 3, etc.)

### Performance Considerations

- JSON Schema validation adds minimal processing overhead
- Visual verification increases LLM usage and costs
- Retry system may increase total processing time but improves accuracy
- Consider adjusting retry counts based on processing time constraints